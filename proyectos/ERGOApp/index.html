<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Sistema de Evaluaci√≥n Ergon√≥mica</title>
    <script type="module" src="supabase-client.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Sistema de Evaluaci√≥n Ergon√≥mica</h1>
            <p>Gesti√≥n integral de centros de trabajo y evaluaciones de riesgo</p>
        </div>

        <div class="content">
            <!-- Secci√≥n de √Åreas Guardadas -->
            <div class="areas-section">
                <div class="areas-header">
                    <h2 class="areas-title">√Åreas Guardadas</h2>
                    <button class="btn btn-primary" onclick="toggleNewAreaForm()">
                        ‚ûï Nueva √Årea
                    </button>
                </div>

                <!-- Lista de √°reas -->
                <div id="areasList">
                    <!-- Las √°reas se cargar√°n aqu√≠ din√°micamente -->
                </div>

                <!-- Estado vac√≠o -->
                <div id="emptyAreasState" class="empty-state hidden">
                    <div class="empty-state-icon"></div>
                    <div class="empty-state-text">No hay √°reas registradas</div>
                    <div class="empty-state-subtext">Comienza creando tu primera √°rea de trabajo</div>
                </div>
            </div>

            <!-- Formulario de Nueva √Årea (oculto por defecto) -->
            <div id="newAreaForm" class="form-section hidden">
                <h3>Registrar Nueva √Årea</h3>
                <form id="areaForm">
                    <div class="form-group">
                        <label for="areaName">Nombre del √Årea *</label>
                        <input type="text" id="areaName" class="form-control" 
                               placeholder="Ej: Laboratorio" required>
                    </div>
                    <div class="form-group">
                        <label for="areaManager">Responsable del √Årea *</label>
                        <input type="text" id="areaManager" class="form-control" 
                               placeholder="Ej: Juan P√©rez" required>
                    </div>
                    <div class="area-actions">
                        <button type="submit" class="btn btn-success">Guardar √Årea</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelNewArea()">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>

            <!-- Secci√≥n de Cargar Evaluaci√≥n -->
            <div class="evaluation-section">
                <div class="evaluation-header">
                    <h2 class="evaluation-title">Cargar Evaluaci√≥n</h2>
                    <p class="evaluation-subtitle">Importa evaluaciones desde archivos JSON o inicia una nueva</p>
                </div>

                <!-- √Årea de carga de archivos -->
                <div class="upload-area" onclick="document.getElementById('jsonFileInput').click()" 
                     ondrop="dropHandler(event)" ondragover="dragOverHandler(event)" 
                     ondragleave="dragLeaveHandler(event)">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-text">Arrastra archivos JSON aqu√≠</div>
                    <div class="upload-subtext">o haz clic para seleccionar archivos</div>
                    <input type="file" id="jsonFileInput" class="file-input" 
                           accept=".json" multiple onchange="handleFileSelect(event)">
                </div>

                <!-- Bot√≥n de nueva evaluaci√≥n -->
                <div class="text-center mt-20">
                    <p style="margin-bottom: 15px; color: #666;">¬øPrefieres hacer una nueva evaluaci√≥n?</p>
                    <a href="formulario_.html" class="btn btn-primary" target="_blank">
                        Iniciar Nueva Evaluaci√≥n
                    </a>
                </div>
            </div>

            <!-- Mensajes de estado -->
            <div id="statusMessages"></div>
        </div>
    </div>
<script src="js/supabase-client.js"></script>
<script type="module" src="js/main.js"></script>
<script type="module" src="js/pages/index-page.js"></script>
</body>
</html>